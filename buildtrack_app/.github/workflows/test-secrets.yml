name: Test Secrets Configuration

on:
  workflow_dispatch:  # Permet de lancer manuellement

jobs:
  test-secrets:
    runs-on: ubuntu-latest
    steps:
      - name: Check Firebase Token
        run: |
          echo "Token length: ${#FIREBASE_TOKEN}"
        env:
          FIREBASE_TOKEN: ${{ secrets.FIREBASE_TOKEN }}

      - name: Validate Service Accounts
        run: |
          if [ -n "$SERVICE_ACCOUNT_STAGING" ]; then
            echo "✅ Staging service account configured"
          else
            echo "❌ Staging service account missing"
            exit 1
          fi
        env:
          SERVICE_ACCOUNT_STAGING: ${{ secrets.FIREBASE_SERVICE_ACCOUNT_STAGING }}